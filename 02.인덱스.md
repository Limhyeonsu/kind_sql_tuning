# 인덱스 기본
## 2.1 인덱스 구조 및 탐색
### 2.1.1 미리보는 인덱스 튜닝
__데이터를 찾는 두 가지 방법__ : 1)테이블 전체를 스캔한다. 2)인덱스를 이용한다. 

__인덱스 튜닝의 두 가지 핵심요소__ : 인덱스는 큰 테이블에서 소량 데이터를 검색할 때 사용한다. 핵심 요소로는 1)인덱스 스캔과정에서 발생하는 비효율을 줄이는 것(인덱스 스캔 효율화 튜닝) 2)테이블 액세스 횟수를 줄이는 것(랜덤 액세스 최소화 튜닝)

둘 중 더 중요한 하나를 고르자면 랜덤 액세스 최소화 튜닝이다. 성능에 미치는 영향이 더 크기 때문이다. 데이터베이스 성능이 느린 이유는 디스크I/O때문이다. 읽어야할 데이터량이 많고, 그 과정에서 디스크I/O가 많이 발생할 때 느리다.

### 2.1.2 인덱스 구조
인덱스는 대용량 테이블에서 필요한 데이터만 빠르게 효율적으로 액세스하기 위해 사용하는 오브젝트다. 데이터베이스에서 인덱스 없이 데이터를 검색하려면 테이블을 처음부터 끝까지 모두 읽어야한다. 반면 인덱스를 사용하면 일부만 읽고 멈출 수 있다. 즉 범위스캔이 가능하다. 범위스캔이 가능한 이유는 인덱스가 __정렬__ 되어 있기 때문이다. DBMS는 일반적으로 B-Tree 인덱스를 사용한다. (루트, 브랜치, 리프로 구성됨) 리프 블록에 저장된 각 레코드는 키값 순으로 정렬돼 있을뿐 아니라 테이블 레코드를 가지키는 주소값, 즉 ROWID를 갖는다. 인덱스 키 값이 같으면 ROWID 순으로 정렬된다.

### 2.1.3 인덱스 수직적 탐색
정렬된 인덱스 레코드 중 조건을 만족하는 첫 번째 레코드를 찾는 과정이다. 즉 인덱스 스캔 시작지점을 찾는 과정이다.(조건을 만족하는 레코드를 찾는 과정이 아닌 조건을 만족하는 첫 번째 레코드를 찾는 과정임) 수직적 탐색은 루트 블록에서부터 시작하고, 루트를 포함해 브랜치 블록에 저장된 각 인덱스 레코드는 하위 블록에 대한 주소값을 갖는다.

### 2.1.4 인덱스 수평적 탐색
수직적 탐색을 통해 스캔 시작점을 찾았으면, 찾고자 하는 데이터가 더 안 나타날 때까지 인덱스 리프 블록을 수평적으로 스캔한다. 인덱스에서 본격적으로 데이터를 찾는 과정이다.

인덱스 리프블록끼리는 서로 앞뒤 블록에 대한 주소값을 갖는다. 즉 양방향 연결 리스트 구조이다. 인덱스를 수평적으로 탐색하는 이유는 1)조건절을 만족하는 데이터를 모두 찾기 위해서 2)ROWID를 얻기 위해서

### 2.1.5 결합 인덱스 구조와 탐색
두 개 이상의 컬럼을 결합해서 인덱스를 만들 수도 있다. 인덱스를 결합할 때 구성의 순서를 어떻게 해도 읽는 인덱스 블록 개수는 똑같다. 인덱스 선두 컬럼을 모두 = 조건으로 검색시 블록I/O 개수가 같으므로 성능도 똑같다. 

**B-Tree 인덱스에서 B는 Balanced의 약자로 이는 어떤 값으로 탐색하더라도 인덱스 루트에서 리프 블록에 도달하기까지 읽는 블록 수가 같음을 의미한다. 즉, 루트로부터 모든 리프 블록까지의 높이는 항상 같다.