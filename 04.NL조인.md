# 조인튜닝
## 4.1 NL조인
조인의 기본은 NL조인이다. NL조인은 인덱스를 이용한 조인이기 때문에 조인 원리도 그대로 적용할 수 있다.

### 4.1.1 기본 메커니즘
NL조인은 Outer와 Inner 양쪽 테이블 모두 인덱스를 이용한다. Outer쪽 테이블은 사이즈가 크지 않으면 인덱스를 이용하지 않을 수 있다. 반면 Inner 테이블은 인덱스를 사용해야한다.

### 4.1.2 NL조인 실행계획 제어
    select /*+ ordered use_nl(c) */
        e.사원명, e.고객명, e.전화번호
    from e.입사일자 >= '19960101'
    and c.관리사원번호 = e.사원번호

ordered 힌트는 FROM 절에서 기술한 순서대로 조인하라고 옵티마이저에 지시할 때 사용한다. use_nl 힌트는 NL 방식으로 조인하라고 지시할 때 사용한다. 이 힌트를 사용하면 FROM 절을 바꾸지 않고도 마음껏 순서를 제어할 수 있다. ordered를 기술하지 않는 경우 조인 순서는 옵티마이저가 스스로 정한다.

### 4.1.3 NL조인 수행 과정 분석
    --인덱스 구성:사원pk(사원번호), 사원_X1(입사일자), 고객pk(고객번호), 고객_X1(관리사원번호), 고객_X2(최종주문금액)
    select /*+ ordered use_nl(c) index(e) index(c) */
    e.사원번호, e.사원명, e.입사일자,
    c.고객번호, c.고객명, c.전화번호, c.최종주문금액
    from 사원 e, 고객 c
    where c.관리번호 = 사원번호       --1
    and e.입사일자 >= '19960101'    --2
    and e.부서코드 >= 'Z123'        --3
    and c.최종주문금액 >= 20000      --4

조건절 비교 순서는 2->3->1->4 순이다. 