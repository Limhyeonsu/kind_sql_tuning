# SQL처리 과정과 I/O
## 1.1 SQL파싱과 최적화
### 1.1.1 구조적, 집합적, 선언적 질의 언어
SQL은 기본적으로 구조적이고, 집합적이고, 선언적인 질의 언어다. 하지만 그 과정은 절차적일 수밖에 없다. 즉 프로시저가 팔요한데 그런 프로시저를 만들어내는 DBMS 내부 엔진이 바로 SQL 옵티마이저이다. 

DBMS 내부에서 프로시저를 작성하고 컴파일해서 실행 가능한 상태로 만드는 전 과정을 'SQL최적화'라고 한다.

### 1.1.2 SQL 최적화
1. SQL 파싱 : 사용자로부터 SQL을 전달받으면 가장 먼저 SQL 파서가 파싱을 진행한다. (파싱트리 생성 -> Syntax[문법적 오류] 체크 -> Semantic[의미상 오류] 체크)
2. SQL 최적화 : 옵티마이저는 미리 수집한 시스템 및 오브젝트 통계정보를 바탕으로 다양한 실행경로를 생성해서 비교한 후 가장 효율적인 하나를 선택한다.(DB성능을 결정하는 핵심엔진)
3. 로우소스생성 : 옵티마이저가 선택한 실행경로를 실제 실행 가능한 코드 또는 프로시저 형태로 포맷팅 하는 단계

### 1.1.3 SQL 옵티마이저
옵티마이저는 사용자가 원하는 작업을 가장 효율적으로 수행할 수 있는 최적의 데이터 액세스 경로를 선택해 주는 DBMS의 핵심 엔진이다.

[최적화 단계]
* 사용자로부터 전달받은 쿼리를 수행하는데 후보가 될만한 실행계획들을 찾아낸다.
* 데이터 딕셔너리에 미리 수집해둔 오브젝트 통계 및 시스템 통계정보를 이용해 각 실행계획의 예상비용을 산정한다.
* 최저 비용을 나타내는 실행계획을 선택한다.

### 1.1.4 실행계획과 비용
옵티마이저의 '실행계획'은 옵티마이저가 생성한 처리절차를 사용자가 확인할 수 있게 트리구조로 표현한 것이다. 옵티마이저가 실행계획을 수행하는 기준은 '비용'이다. 비용은 쿼리를 수행하는 동안 발생할 것으로 예상하는 I/O횟수 또는 예상 소요시간을 표현한 값이다. 비용은 예상치이므로 실게 수행할 때 발생하는 I/O 또는 시간과 많은 차이가 난다.

### 1.1.5 옵티마이저 힌트
옵티마이저의 선택이 항상 최선은 아니다. 대부분 좋은 선택을 하지만 완벽하지 않다. 그래서 개발자가 직접 더 효율적인 액세스 경로를 찾아낼 수 있는데 이때 사용하는 것이 옵티마이저 힌트이다. 힌트를 이용하여 데이터 액세스 경로를 바꿀 수 있다. 

__/*+ INDEX(A 고객_PK) */__ 식으로 사용한다.

[주의사항]
* 힌트안에 인자를 나열할 땐 , 콤마를 사용한다. 단, 힌트와 힌트 사이에 사용하면 안 된다.
* 테이블을 지정할 때 스키마명까지 명시하면 안된다.
* ALIAS를 지정했다면 힌트에도 반드시 ALIAS를 사용해야한다.